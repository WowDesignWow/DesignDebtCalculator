<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>設計債成本計算器 Pro+</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f3f4f6;
        }
        .card-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        }
        /* Custom scrollbar for better look */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1; 
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8; 
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="bg-white w-full max-w-md rounded-3xl card-shadow overflow-hidden flex flex-col h-[90vh]">
        
        <!-- Header -->
        <div class="gradient-bg p-6 text-white text-center flex-shrink-0">
            <h1 class="text-2xl font-bold mb-1 tracking-wide"><i class="fas fa-calculator mr-2"></i>設計債成本計算器</h1>
            <p class="text-blue-200 text-xs uppercase tracking-wider font-semibold">Design Debt Estimator Pro+</p>
        </div>

        <!-- Scrollable Content -->
        <div class="p-6 space-y-6 overflow-y-auto flex-grow">
            
            <!-- Section 1: Basic Cost -->
            <div class="bg-white rounded-xl border border-gray-100 p-4 shadow-sm">
                <div class="flex items-center text-gray-800 font-bold border-b border-gray-100 pb-3 mb-3">
                    <div class="w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mr-3">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <span>薪資基準 (TWD)</span>
                </div>
                <div class="space-y-4">
                    <!-- Monthly Salary Input -->
                    <div>
                        <label class="text-xs text-gray-500 font-bold uppercase tracking-wide block mb-1">平均月薪</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-gray-400">$</span>
                            <input type="number" id="salary" value="70000" class="w-full bg-gray-50 border border-gray-200 text-gray-900 font-semibold rounded-lg focus:ring-blue-500 focus:border-blue-500 block pl-8 p-2.5 transition-colors" placeholder="70000">
                        </div>
                    </div>

                    <!-- Months per Year Selection -->
                    <div>
                        <label class="text-xs text-gray-500 font-bold uppercase tracking-wide block mb-2">年薪月數 (含年終/獎金)</label>
                        <div class="grid grid-cols-3 gap-2">
                            <label class="cursor-pointer">
                                <input type="radio" name="monthsPerYear" value="12" class="peer sr-only">
                                <div class="rounded-lg border border-gray-200 p-2 text-center text-sm font-medium text-gray-500 hover:bg-gray-50 peer-checked:border-blue-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 transition-all">
                                    12 個月
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="monthsPerYear" value="13" class="peer sr-only">
                                <div class="rounded-lg border border-gray-200 p-2 text-center text-sm font-medium text-gray-500 hover:bg-gray-50 peer-checked:border-blue-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 transition-all">
                                    13 個月
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="monthsPerYear" value="14" class="peer sr-only" checked>
                                <div class="rounded-lg border border-gray-200 p-2 text-center text-sm font-medium text-gray-500 hover:bg-gray-50 peer-checked:border-blue-500 peer-checked:bg-blue-50 peer-checked:text-blue-600 transition-all">
                                    14 個月
                                </div>
                            </label>
                        </div>
                    </div>

                    <p class="text-[10px] text-gray-400 flex items-start">
                        <i class="fas fa-info-circle mr-1 mt-0.5"></i>
                        系統會將年薪總額攤提至每小時成本，並加乘 1.5 倍營運係數。
                    </p>
                </div>
            </div>

            <!-- Section 2: Designers -->
            <div class="bg-white rounded-xl border border-gray-100 p-4 shadow-sm">
                <div class="flex items-center text-gray-800 font-bold border-b border-gray-100 pb-3 mb-3">
                    <div class="w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center mr-3">
                        <i class="fas fa-pen-nib"></i>
                    </div>
                    <span>設計團隊 (Designers)</span>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs text-gray-500 font-bold uppercase tracking-wide block mb-1">人數</label>
                        <input type="number" id="nDes" value="5" class="w-full bg-gray-50 border border-gray-200 text-gray-900 font-semibold rounded-lg p-2.5 text-center">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 font-bold uppercase tracking-wide block mb-1">日浪費(時)</label>
                        <input type="number" id="tDes" value="1.5" step="0.5" class="w-full bg-gray-50 border border-gray-200 text-gray-900 font-semibold rounded-lg p-2.5 text-center">
                    </div>
                </div>
            </div>

            <!-- Section 3: Developers -->
            <div class="bg-white rounded-xl border border-gray-100 p-4 shadow-sm">
                <div class="flex items-center text-gray-800 font-bold border-b border-gray-100 pb-3 mb-3">
                    <div class="w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center mr-3">
                        <i class="fas fa-code"></i>
                    </div>
                    <span>開發團隊 (Developers)</span>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs text-gray-500 font-bold uppercase tracking-wide block mb-1">人數</label>
                        <input type="number" id="nDev" value="20" class="w-full bg-gray-50 border border-gray-200 text-gray-900 font-semibold rounded-lg p-2.5 text-center">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500 font-bold uppercase tracking-wide block mb-1">日浪費(時)</label>
                        <input type="number" id="tDev" value="1.0" step="0.5" class="w-full bg-gray-50 border border-gray-200 text-gray-900 font-semibold rounded-lg p-2.5 text-center">
                    </div>
                </div>
            </div>

            <!-- Detailed Calculation Logic Explanation -->
            <div class="bg-slate-50 p-5 rounded-xl border border-slate-200">
                <div class="flex justify-between items-center cursor-pointer group" onclick="toggleLogic()">
                    <h3 class="text-sm font-bold text-slate-700 flex items-center">
                        <i class="fas fa-book-open mr-2 text-slate-400 group-hover:text-blue-500 transition-colors"></i> 
                        計算邏輯詳解
                    </h3>
                    <div class="bg-white p-1 rounded-full border border-slate-200 shadow-sm group-hover:border-blue-300 transition-colors">
                        <i class="fas fa-chevron-down text-slate-400 text-xs transform transition-transform duration-300" id="logicIcon"></i>
                    </div>
                </div>
                
                <div id="logicContent" class="hidden mt-4 space-y-4 text-xs text-slate-600 leading-relaxed border-t border-slate-200 pt-4">
                    
                    <!-- Logic 1 -->
                    <div>
                        <h4 class="font-bold text-slate-800 mb-1 flex items-center">
                            <span class="w-4 h-4 bg-blue-600 text-white rounded-full flex items-center justify-center text-[10px] mr-2">1</span>
                            真實人力成本 (Fully Loaded Cost)
                        </h4>
                        <p class="pl-6 mb-2">
                            公式：<code class="bg-slate-200 px-1 rounded text-slate-800">(月薪 × 年薪月數 ÷ 12) × 1.5 ÷ 160小時</code>
                        </p>
                        <p class="pl-6 text-slate-500 mb-2">
                            <strong>年終攤提：</strong> 將年薪總額（含13或14個月）攤提至每月，反映真實月支出。
                        </p>
                        <p class="pl-6 text-slate-500">
                            <strong>1.5倍營運係數：</strong> 此為財務會計標準，涵蓋勞健保(約20%)、退休金(6%)、辦公室租金、水電、軟體授權(Adobe/Figma)、硬體折舊與行政管理費。
                        </p>
                    </div>

                    <!-- Logic 2 -->
                    <div>
                        <h4 class="font-bold text-slate-800 mb-1 flex items-center">
                            <span class="w-4 h-4 bg-purple-600 text-white rounded-full flex items-center justify-center text-[10px] mr-2">2</span>
                            設計師的隱形浪費 (Design Waste)
                        </h4>
                        <ul class="pl-6 list-disc list-outside space-y-1 text-slate-500">
                            <li><strong>搜尋成本：</strong> 在混亂的檔案夾中尋找「上次用的那個Icon」。</li>
                            <li><strong>重複造輪子：</strong> 因為沒有元件庫，重新繪製已存在的按鈕或表單。</li>
                        </ul>
                    </div>

                    <!-- Logic 3 -->
                    <div>
                        <h4 class="font-bold text-slate-800 mb-1 flex items-center">
                            <span class="w-4 h-4 bg-green-600 text-white rounded-full flex items-center justify-center text-[10px] mr-2">3</span>
                            工程師的隱形浪費 (Dev Waste)
                        </h4>
                        <ul class="pl-6 list-disc list-outside space-y-1 text-slate-500">
                            <li><strong>猜測意圖：</strong> 測量設計稿像素(Pixel-peeping)，猜測間距是 15px 還是 16px。</li>
                            <li><strong>溝通成本：</strong> 截圖詢問設計師「這個狀態下按鈕要變色嗎？」。</li>
                        </ul>
                    </div>

                    <!-- Logic 4 -->
                    <div>
                        <h4 class="font-bold text-slate-800 mb-1 flex items-center">
                            <span class="w-4 h-4 bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] mr-2">4</span>
                            費米推定總結 (Fermi Estimation)
                        </h4>
                        <p class="pl-6">
                            我們將每日微小的無效工時，乘以全年度 <strong>250 個工作天</strong>。日常的「小麻煩」累積起來就是巨大的「淨利潤損失」。
                        </p>
                    </div>

                </div>
            </div>

        </div>

        <!-- Footer / Action -->
        <div class="p-5 border-t border-gray-100 bg-white flex-shrink-0">
            <button onclick="calculate()" class="w-full gradient-bg hover:bg-blue-700 text-white font-bold py-3.5 px-4 rounded-xl shadow-lg shadow-blue-500/30 transform transition-all duration-200 hover:scale-[1.02] active:scale-95 flex items-center justify-center">
                <span>開始計算年度虧損</span>
                <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </div>

    <!-- Result Modal (Overlay) -->
    <div id="resultModal" class="fixed inset-0 bg-slate-900/60 flex items-center justify-center z-50 hidden backdrop-blur-sm transition-opacity opacity-0">
        <div class="bg-white rounded-3xl p-8 w-11/12 max-w-sm text-center shadow-2xl transform scale-95 transition-transform duration-300" id="modalContent">
            
            <div class="mb-5 relative">
                <div class="absolute inset-0 bg-red-100 rounded-full blur-xl opacity-50"></div>
                <div class="relative w-20 h-20 bg-gradient-to-br from-red-100 to-red-50 rounded-full flex items-center justify-center mx-auto border-4 border-white shadow-sm">
                    <i class="fas fa-fire-alt text-3xl text-red-500"></i>
                </div>
            </div>

            <h2 class="text-slate-500 text-xs font-bold uppercase tracking-widest mb-1">年度預估浪費成本</h2>
            <div class="text-4xl font-black text-slate-800 mb-2 tracking-tight" id="finalResult">$0</div>
            
            <div class="bg-red-50 border border-red-100 text-red-600 text-xs font-medium px-4 py-2 rounded-lg mb-6 inline-block">
                相當於 <span id="hoursLost" class="font-bold text-red-700">0</span> 個工時被「燒掉」了
            </div>

            <div class="space-y-3 text-left mb-8">
                <div class="flex items-center p-3 bg-slate-50 rounded-xl">
                    <div class="w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-400 mr-3 shadow-sm flex-shrink-0">
                        <i class="fas fa-user-times text-xs"></i>
                    </div>
                    <div class="text-xs text-slate-500">
                        這筆錢相當於少請了 <strong id="engCount" class="text-slate-800 text-sm">0</strong> 位資深工程師或 <strong id="desCount" class="text-slate-800 text-sm">0</strong> 位資深設計師。
                    </div>
                </div>
            </div>

            <button onclick="closeModal()" class="w-full bg-slate-900 text-white font-bold py-3.5 rounded-xl hover:bg-slate-800 transition shadow-lg">
                關閉並調整數值
            </button>
        </div>
    </div>

    <script>
        // Logic Toggle Animation
        function toggleLogic() {
            const content = document.getElementById('logicContent');
            const icon = document.getElementById('logicIcon');
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                setTimeout(() => icon.classList.add('rotate-180'), 10);
            } else {
                content.classList.add('hidden');
                icon.classList.remove('rotate-180');
            }
        }

        // Calculation Function
        function calculate() {
            // Get inputs
            const salary = parseFloat(document.getElementById('salary').value) || 0;
            const monthsPerYear = parseFloat(document.querySelector('input[name="monthsPerYear"]:checked').value);
            const nDes = parseFloat(document.getElementById('nDes').value) || 0;
            const tDes = parseFloat(document.getElementById('tDes').value) || 0;
            const nDev = parseFloat(document.getElementById('nDev').value) || 0;
            const tDev = parseFloat(document.getElementById('tDev').value) || 0;

            // Constants
            const multiplier = 1.5;
            const workDays = 250;
            const hoursPerMonth = 160;

            // 1. Calculate Real Hourly Cost (Including Annual Bonus spread over the year)
            // Logic: (Monthly Salary * Months / 12) gives the "Real Average Monthly Salary"
            // Then apply 1.5 multiplier for overhead, then divide by monthly hours.
            const realMonthlySalary = salary * (monthsPerYear / 12);
            const hourlyCost = (realMonthlySalary * multiplier) / hoursPerMonth;

            // 2. Daily Loss
            const desLoss = nDes * tDes * hourlyCost;
            const devLoss = nDev * tDev * hourlyCost;

            // 3. Totals
            const annualLoss = (desLoss + devLoss) * workDays;
            const totalHours = (nDes * tDes + nDev * tDev) * workDays;
            
            // Hiring Power calculation
            // Base annual cost for one person (Fully loaded) = realMonthlySalary * multiplier * 12
            // Or simply: salary * monthsPerYear * multiplier
            const costPerPersonBase = salary * monthsPerYear * multiplier;
            
            // Assuming Senior Engineers cost ~10% more than the average base input
            // and Senior Designers cost ~15% less than the base
            const engCost = costPerPersonBase * 1.1; 
            const desCost = costPerPersonBase * 0.85;

            const engCount = annualLoss / engCost;
            const desCount = annualLoss / desCost;

            // Update UI
            document.getElementById('finalResult').innerText = formatCurrency(annualLoss);
            document.getElementById('hoursLost').innerText = Math.round(totalHours).toLocaleString();
            
            // Update Hiring Power Text
            document.getElementById('engCount').innerText = engCount.toFixed(1);
            document.getElementById('desCount').innerText = desCount.toFixed(1);

            // Show Modal with animation
            const modal = document.getElementById('resultModal');
            const modalContent = document.getElementById('modalContent');
            
            modal.classList.remove('hidden');
            void modal.offsetWidth; // Trigger reflow
            
            modal.classList.remove('opacity-0');
            modalContent.classList.remove('scale-95');
            modalContent.classList.add('scale-100');
        }

        function closeModal() {
            const modal = document.getElementById('resultModal');
            const modalContent = document.getElementById('modalContent');
            
            modal.classList.add('opacity-0');
            modalContent.classList.remove('scale-100');
            modalContent.classList.add('scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        function formatCurrency(num) {
            return new Intl.NumberFormat('zh-TW', { 
                style: 'currency', 
                currency: 'TWD', 
                maximumFractionDigits: 0 
            }).format(num);
        }
    </script>
</body>
</html>